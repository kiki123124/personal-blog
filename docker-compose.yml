version: '3.8'

services:
  nextjs-blog:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: nextjs-blog
    restart: unless-stopped
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
    volumes:
      # 持久化上传的图片（头像、博客封面、音乐封面等）
      - ./uploads:/app/public/uploads
      # 持久化音乐文件
      - ./music:/app/public/music
      # 持久化内容数据（博客文章、个人资料等）
      - ./src/content:/app/src/content
    # 如果有环境变量文件，取消以下注释
    # env_file:
    #   - .env.local
